<section id="product-cards" class="container">
  <div class="row" id="product-row">
    <!-- Product cards will be dynamically added here -->
  </div>
</section>

<script>
  const basePath = "../assets/img/portfolio/<?php echo $productCategory; ?>/";
  const products = <?php echo json_encode($products); ?>;

  products.forEach((product) => createProductCard(product));
  initProductCards();

  function createProductCard({ name, imgSrc, sizes, colors }) {
    const card = document.createElement("div");
    card.classList.add("col-sm-6", "col-md-4", "col-lg-3");
    card.innerHTML = `
      <div class="card">
        <img src="${
          basePath + imgSrc
        }" class="card-img-top product-img" alt="${name}">
        <div class="card-body">
          <h5 class="card-title">${name}</h5>
          <div class="d-flex justify-content-between">
            <div class="size-options">
              ${sizes.map((size) => `<span>${size}</span>`).join("")}
            </div>
            <fieldset class="color-selection">
              <div class="color-swatches">
                ${colors
                  .map(
                    (color, index) => `
                  <div class="swatch">
                    <input type="radio" id="color${index}-${name}" name="color-${name}" value="color${index}" data-img-src="${
                      basePath + color.imgSrc
                    }">
                    <label for="color${index}-${name}" class="${
                      color.className
                    }"></label>
                  </div>`
                  )
                  .join("")}
              </div>
            </fieldset>
          </div>
        </div>
      </div>
    `;
    document.getElementById("product-row").appendChild(card);
  }

  function initProductCards() {
    document
      .querySelectorAll(".color-selection input[type='radio']")
      .forEach((radio) => {
        radio.addEventListener("click", (e) => {
          const imgElement = e.target
            .closest(".card")
            .querySelector(".product-img");
          imgElement.src = e.target.getAttribute("data-img-src");
        });
      });
  }
</script>
